def getFromPath(String path) {
    return "../web/${path ? path : ''}"
}

def getDestPath(String path) {
    return "src/main/resources/public/${path ? path : ''}"
}

task copyWeb {
    doLast {
        copy {
            from getFromPath('export')
            into getDestPath('')
        }
        copy {
            from getFromPath('config/config.json')
            into getDestPath('config')
        }
    }
}

task cleanWeb(type: Delete) {
    delete getDestPath('')
}

task buildWithWeb(dependsOn: ['cleanWeb', 'buildWebModule', 'copyWeb'])
task buildWebModule(dependsOn: ':web:buildWeb')

buildWebModule.mustRunAfter(cleanWeb)
copyWeb.mustRunAfter(buildWebModule)